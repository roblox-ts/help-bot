use crate::config::BotConfig;
use anyhow::Context;
use std::sync::Arc;
use twilight_gateway::Event;
use twilight_http::Client;

mod message_create;
mod thread_create;
mod thread_update;

pub async fn handle_event(client: Arc<Client>, config: BotConfig, event: Event) {
    match event {
        Event::MessageCreate(e) => message_create::handle(client, *e).await,
        Event::ThreadCreate(e) => thread_create::handle(client, &config, *e).await,
        Event::ThreadUpdate(e) => thread_update::handle(client, &config, *e).await,
        _ => Ok(()),
    }
    .context("Event handler failed!")
    .unwrap();
}
